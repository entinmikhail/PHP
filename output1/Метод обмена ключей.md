
В данном разделе описывается работа с методом обмена API ключа на oAuth код авторизации

<a name="exchange-key"></a>

### Обмен API ключей на код авторизации oAuth

#### Метод

*POST /oauth2/exchange_api_key*

#### Описание 

Метод позволяет обменять API ключ на код авторизации oAuth.
Код авторизации будет отправлен на указанный в интеграции Redirect Uri с дополнительным GET-параметром from_exchange=1.
Подробней про обмен кода авторизации читайте [тут]https://amocrm.ru/developers/content/oauth/step-by-step#get_access_token).

#### Ограничения 

*   Метод доступен всем пользователям, администраторам и не администраторам
*   Вызов данного метода для одного пользователя и одной интеграции возможен не чаще, чем раз в 5 минут. В будущем данный лимит может быть изменен
*   Для вызова данного метода, интеграция должна быть установлена в аккаунте
*   Код авторизации будет отправлен на указанный в интеграции Redirect Uri с дополнительным GET-параметром from_exchange=1

#### Заголовок запроса 

*Content-Type: application/json*

#### Параметры запроса 




| Параметр | Тип данных | Описание |
|--|--|--|
| login | string | Логин пользователя |
| api_key | string | Действующий API ключ пользователя |
| client_uuid | string | UUID oAuth интеграции, которая получит код авторизации |
| client_secret | string | Секретный ключ oAuth интеграции, которая получит код авторизации |
| state | string | Параметр состояния, который вернется в виде вебхука, вместе с кодом авторизации. Параметр не обязательный. |

#### Пример запроса



```

{
    "login": "example@test.com",
    "api_key": "xxe9YYfxx0e6axx06c6xx55249xx8bXXe11ebfxx",
    "client_uuid": "0eYY11a7-aXX3-403d-a758-XXc54e2XX6a3",
    "client_secret": "yuyXXG0D4ufVc9ELHk1zZEk5GGfvVJXjIHrvP3auXXaHmPZC18YYte6FOLZZkuTk"
}

```

#### HTTP коды ответа

| Код ответа | Условие |
|------------|---------|
| 202 | Запрос принят |
| 403 | Не хватает прав для вызова данного метода |
| 429 | Метод вызывается слишком часто |
| 400 | Переданы некорректные данные. Подробности доступны в теле ответа |

#### Параметры ответа 

Метод не возвращает тело ответа
<!-- Generated at Wed, 03 Mar 2021 08:35:08 +0000. amoCRM Documentation Generator -->