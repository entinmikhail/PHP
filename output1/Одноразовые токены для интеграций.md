
<a name="common-info"></a>

### Одноразовые токены для интеграций

#### Описание 
Одноразовые токены интеграций - это JSON Web Token [(JWT)](https://jwt.io/) токены, которые могут переданы вместе с запросом на сторонние ресурсы из Web интерфейса amoCRM.<br>
В токене содержится зашифрованная информация о пользователе, из под которого был сделан запрос к вам на ресурс.

#### Как получить одноразовый токен?
Мы уже реализовали метод в рамках WEB SDK для работы вашей интеграции.<br> 
Метод позволяет сделать запрос с подмешиванием заголовка в запрос.<br>
Подробная информация о методе: [this.$authorizedAjax()](https://amocrm.ru/developers/content/web\_sdk/mechanics\#authorized\_ajax).

#### Алгоритм декодирования токена 
Алгоритм подписи токена - HS256.<br>
В качестве ключа используется секретный ключ интеграции (доступ к этому ключу, есть только у владельца интеграции).<br>
Для декодирования токена мы рекомендуем использовать методы [нашей библиотеки](https://github.com/amocrm/amocrm-api-php) или одну из [публичных библиотек](https://jwt.io/\#libraries-io).<br> Вы также можете использовать [отладчик](https://jwt.io/\#debugger-io) для декодирования, проверки и генерации JWT.

#### Параметры токена после декодирования

| Параметр     | Тип данных | Описание                                                                         |
|--------------|------------|----------------------------------------------------------------------------------|
| iss          | string     | Адрес аккаунта в amoCRM                                                          |
| aud          | string     | Базовый адрес, который сформирован исходя из значения redirect\_uri в интеграции |
| jti          | string     | UUID токена                                                                      |
| iat          | int        | Timestamp, когда был выдан токен                                                 |
| nbf          | int        | Timestamp, когда токен начинает действовать                                      |
| exp          | int        | Timestamp, когда токен будет просрочен                                           |
| account\_id  | int        | ID аккаунта, из которого сделан запрос                                           |
| user\_id     | int        | ID пользователя, из под которого сделан запрос                                   |
| client\_uuid | string     | UUID интеграции, которая сделала запрос                                          |

#### Пример ответа

```json
        `{
    "iss": "https://subdomain.amocrm.ru",
    "aud": "https://external.integration.io",
    "jti": "d628f123-5123-473e-a123-ed123ef31f8f",
    "iat": 1594204245,
    "nbf": 1594204245,
    "exp": 1594206045,
    "account_id": 12345678,
    "user_id": 87654321,
    "subdomain": "subdomain",
    "client_uuid": "0b0832f6-d123-4123-9123-e73f236833c"
}` 
```


<!-- Generated at Fri, 05 Mar 2021 10:18:21 +0000. amoCRM Documentation Generator -->